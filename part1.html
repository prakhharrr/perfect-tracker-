<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1200, initial-scale=1">
<title>Personal Tracker</title>

<style>
html,body{
  margin:0;
  background:#000;
  color:#eaeaea;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}
body{display:flex;justify-content:center}
#app{width:1200px;padding:20px}

/* card */
.card{
  width:1200px;
  background:radial-gradient(ellipse at top,#1a1a1a,#000);
  border-radius:22px;
  padding:24px;
  margin-bottom:26px;
  box-shadow:0 0 60px rgba(0,0,0,.9);
}
h1{margin:0 0 12px;color:#7db2ff}
h3{margin:0 0 14px;font-weight:500;color:#cfcfcf}

/* table */
table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;
}
th,td{
  border:1px solid rgba(255,255,255,.08);
  font-size:12px;
  text-align:center;
  height:30px;
}
th:first-child,td:first-child{
  width:220px;
  text-align:left;
  padding-left:8px;
}
th:last-child,td:last-child{width:120px}

/* cells */
td.cell{cursor:pointer}
.box{
  width:16px;height:16px;
  border:2px solid #9aa4b2;
  margin:auto;border-radius:4px;
  position:relative;
}
.box.checked{
  background:#5fa4ff;
  border-color:#5fa4ff;
}
.box.checked::after{
  content:"âœ“";
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:14px;
  font-weight:700;
}

/* controls */
.controls{display:flex;gap:6px;align-items:center}
.ctrl{cursor:pointer;opacity:.6}
.ctrl:hover{opacity:1}

/* ring */
.ring-wrap{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:10px;
  padding-right:8px;
}
svg.ring{width:34px;height:34px}
.ring-bg{stroke:#1f1f1f;stroke-width:5;fill:none}
.ring-fg{
  stroke:#35e27a;
  stroke-width:5;
  fill:none;
  stroke-linecap:round;
  transition:stroke-dashoffset .6s ease;
}
.ring-text{font-size:13px;color:#dcdcdc}

/* input */
.inline{
  width:100%;
  background:none;
  border:none;
  color:inherit;
  outline:none;
  font-size:13px;
}

button{
  margin-top:10px;
  padding:8px 14px;
  border-radius:10px;
  background:none;
  border:1px solid #7db2ff;
  color:#7db2ff;
}

canvas{width:100%;height:320px}
</style>
</head>

<body>
<div id="app">

<!-- ===== HABITS (TOP) ===== -->
<h1>ðŸ§  Personal Tracker</h1>

<div class="card">
<b>Habits</b>
<table id="habitTable"></table>
<button onclick="addHabit()">+ Add habit</button>
</div>

<!-- ===== GRAPH (BOTTOM) ===== -->
<div class="card">
  <h3>Daily Habit Score</h3>
  <canvas id="c" width="1200" height="320"></canvas>
</div>

</div>

<script>
/* ================= HABIT LOGIC ================= */
const now=new Date();
const Y=now.getFullYear();
const M=now.getMonth();
const DAYS=new Date(Y,M+1,0).getDate();
const KEY="tracker-"+Y+"-"+M;

let dataStore=JSON.parse(localStorage.getItem(KEY))||{
  habits:[
    {name:"Workout",checks:{}},
    {name:"Reading",checks:{}},
    {name:"Meditation",checks:{}},
    {name:"Sleep 8h",checks:{}}
  ]
};

function persist(){localStorage.setItem(KEY,JSON.stringify(dataStore))}
function addHabit(){dataStore.habits.push({name:"",checks:{}});persist();renderHabits();updateGraph()}
function removeHabit(i){dataStore.habits.splice(i,1);persist();renderHabits();updateGraph()}
function moveHabit(i,d){
  const n=i+d;if(n<0||n>=dataStore.habits.length)return;
  [dataStore.habits[i],dataStore.habits[n]]=[dataStore.habits[n],dataStore.habits[i]];
  persist();renderHabits();updateGraph()
}
function toggleHabit(i,d){
  dataStore.habits[i].checks[d]=!dataStore.habits[i].checks[d];
  persist();renderHabits();updateGraph()
}

function renderHabits(){
  habitTable.innerHTML="";
  let head="<tr><th>Habit</th>";
  for(let d=1;d<=DAYS;d++) head+=`<th>${d}</th>`;
  head+="<th></th></tr>";
  habitTable.innerHTML=head;

  dataStore.habits.forEach((hb,i)=>{
    let row=`<tr><td>
      <div class="controls">
        <input class="inline" value="${hb.name}"
        oninput="dataStore.habits[${i}].name=this.value;persist()">
        <span class="ctrl" onclick="moveHabit(${i},-1)">â¬†</span>
        <span class="ctrl" onclick="moveHabit(${i},1)">â¬‡</span>
        <span class="ctrl" onclick="removeHabit(${i})">âœ•</span>
      </div>
    </td>`;
    for(let d=1;d<=DAYS;d++){
      row+=`<td class="cell" onclick="toggleHabit(${i},${d})">
        <div class="box ${hb.checks[d]?'checked':''}"></div>
      </td>`;
    }
    let done=Object.values(hb.checks).filter(Boolean).length;
    let pct=Math.round((done/DAYS)*100);
    let dash=2*Math.PI*14*(1-pct/100);
    row+=`<td>
      <div class="ring-wrap">
        <span class="ring-text">${pct}%</span>
        <svg class="ring" viewBox="0 0 40 40">
          <circle cx="20" cy="20" r="14" class="ring-bg"/>
          <circle cx="20" cy="20" r="14" class="ring-fg"
            style="stroke-dasharray:${2*Math.PI*14};
            stroke-dashoffset:${dash}"/>
        </svg>
      </div>
    </td></tr>`;
    habitTable.innerHTML+=row;
  });
}

/* ================= GRAPH (YOUR DESIGN) ================= */
const c=document.getElementById("c");
const ctx=c.getContext("2d");
const W=c.width;
const H=c.height;
const pad=70;
let start=null;
let data=[];

const monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function buildDailyData(){
  let arr=[];
  for(let d=1;d<=DAYS;d++){
    let total=dataStore.habits.length;
    if(!total){arr.push(0);continue}
    let done=0;
    dataStore.habits.forEach(h=>{if(h.checks[d]) done++});
    arr.push(Math.round((done/total)*100));
  }
  return arr;
}

function easeOutCubic(t){return 1-Math.pow(1-t,3)}

function point(i,p){
  const x=pad+i*(W-2*pad)/(data.length-1);
  const y=H-pad-(data[i]/100)*(H-pad-30)*p;
  return{x,y};
}

function draw(ts){
  if(!start) start=ts;
  const t=Math.min((ts-start)/900,1);
  const e=easeOutCubic(t);
  ctx.clearRect(0,0,W,H);

  /* axes */
  ctx.strokeStyle="#222";
  ctx.beginPath();
  ctx.moveTo(pad,20);
  ctx.lineTo(pad,H-pad);
  ctx.lineTo(W-pad,H-pad);
  ctx.stroke();

  /* y labels */
  ctx.fillStyle="#9a9a9a";
  ctx.font="12px system-ui";
  [0,25,50,75,100].forEach(v=>{
    const y=H-pad-(v/100)*(H-pad-30);
    ctx.fillText(v+"%",18,y+4);
  });

  /* x labels (DATES) */
  ctx.textAlign="center";
  data.forEach((_,i)=>{
    const x=pad+i*(W-2*pad)/(data.length-1);
    ctx.fillText(`${i+1}`,x,H-pad+22);
  });
  ctx.textAlign="left";

  /* area */
  const grad=ctx.createLinearGradient(0,20,0,H-pad);
  grad.addColorStop(0,"rgba(90,160,255,0.45)");
  grad.addColorStop(1,"rgba(90,160,255,0)");

  ctx.beginPath();
  data.forEach((_,i)=>{
    const p=point(i,e);
    if(i===0) ctx.moveTo(p.x,p.y);
    else{
      const pr=point(i-1,e);
      const cx=(pr.x+p.x)/2;
      ctx.bezierCurveTo(cx,pr.y,cx,p.y,p.x,p.y);
    }
  });
  ctx.lineTo(W-pad,H-pad);
  ctx.lineTo(pad,H-pad);
  ctx.closePath();
  ctx.fillStyle=grad;
  ctx.fill();

  /* curve */
  ctx.strokeStyle="#6aa6ff";
  ctx.lineWidth=3;
  ctx.shadowColor="rgba(106,166,255,0.8)";
  ctx.shadowBlur=18;
  ctx.stroke();
  ctx.shadowBlur=0;

  /* % labels */
  if(t>0.65){
    ctx.font="14px system-ui";
    ctx.fillStyle="#fff";
    ctx.shadowColor="rgba(0,0,0,.6)";
    ctx.shadowBlur=6;
    data.forEach((v,i)=>{
      const p=point(i,e);
      ctx.fillText(v+"%",p.x,p.y-18);
    });
    ctx.shadowBlur=0;
  }

  if(t<1) requestAnimationFrame(draw);
}

function updateGraph(){
  start=null;
  data=buildDailyData();
  requestAnimationFrame(draw);
}

/* INIT */
renderHabits();
updateGraph();
</script>

</body>
</html>
