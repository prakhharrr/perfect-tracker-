<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1200, initial-scale=1">
<title>Personal Tracker</title>

<style>
html, body{
  margin:0;
  padding:0;
  background:#000;
  color:#eaeaea;
  font-family: system-ui, -apple-system, Segoe UI, sans-serif;
}

/* page width same as sleep tracker */
.page-width{
  width:1200px;
  margin:0 auto;
}

/* ---------- TABS ---------- */
.tabs{
  display:flex;
  gap:12px;
  margin:24px auto 32px;
  width:1200px;
}

.tab-btn{
  padding:10px 18px;
  border-radius:12px;
  background:#111;
  color:#aaa;
  border:1px solid #222;
  cursor:pointer;
  font-size:14px;
}

.tab-btn.active{
  background:#1a1a1a;
  color:#7df;
  border-color:#7df;
  box-shadow:0 0 12px rgba(125,223,255,.25);
}

/* ---------- TAB CONTENT ---------- */
.tab-content{
  display:none;
}

.tab-content.active{
  display:block;
}

/* ---------- IFRAMES ---------- */
.iframe-wrap{
  margin-bottom:48px;
}

iframe{
  width:100%;
  border:none;
  display:block;
}
</style>
</head>

<body>

<!-- TABS -->
<div class="tabs">
  <button class="tab-btn" data-tab="trackers">
    ðŸ“Š Trackers
  </button>
  <button class="tab-btn" data-tab="journal">
    ðŸ““ Journal
  </button>
</div>

<!-- TRACKERS TAB -->
<div id="trackers" class="tab-content">
  <div class="page-width">

    <!-- PART 1 -->
    <div class="iframe-wrap">
      <iframe src="part1.html" onload="fitIframe(this)"></iframe>
    </div>

    <!-- PART 2 -->
    <div class="iframe-wrap">
      <iframe src="part2.html" onload="normalIframe(this)"></iframe>
    </div>
    <div class="iframe-wrap">
      <iframe src="part4.html" onload="fitIframe(this)"></iframe>
    </div>

  </div>
</div>

<!-- JOURNAL TAB -->
<div id="journal" class="tab-content">
  <div class="page-width">

    <!-- PART 3 (ONLY HERE) -->
    <div class="iframe-wrap">
      <iframe src="part3.html" onload="normalIframe(this)"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB LOGIC (WITH PERSISTENCE) ---------- */
const tabs = document.querySelectorAll(".tab-btn");
const contents = document.querySelectorAll(".tab-content");

function openTab(tabId){
  contents.forEach(c => c.classList.remove("active"));
  tabs.forEach(b => b.classList.remove("active"));

  document.getElementById(tabId).classList.add("active");
  document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");

  localStorage.setItem("activeTab", tabId);
}

tabs.forEach(btn=>{
  btn.addEventListener("click", () => {
    openTab(btn.dataset.tab);
  });
});

/* ---------- IFRAME HELPERS (UNCHANGED) ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){}
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){}
}

/* ---------- INITIAL LOAD ---------- */
window.addEventListener("load", () => {
  const savedTab = localStorage.getItem("activeTab") || "trackers";
  openTab(savedTab);
});
</script>

</body>
</html>    <!-- PART 3 -->
    <div class="iframe-wrap">
      <iframe id="iframe-part3" src="part3.html"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB SYSTEM (STATEFUL) ---------- */
const tabs = document.querySelectorAll(".tab-btn");
const contents = document.querySelectorAll(".tab-content");

function openTab(tabId){
  contents.forEach(c => c.classList.remove("active"));
  tabs.forEach(b => b.classList.remove("active"));

  document.getElementById(tabId).classList.add("active");
  document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");

  localStorage.setItem("activeTab", tabId);

  // resize visible iframes AFTER tab opens
  setTimeout(resizeVisibleIframes, 50);
}

tabs.forEach(btn=>{
  btn.addEventListener("click", () => {
    openTab(btn.dataset.tab);
  });
});

/* ---------- IFRAME HELPERS ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){}
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){}
}

function resizeVisibleIframes(){
  if(document.getElementById("trackers").classList.contains("active")){
    fitIframe(document.getElementById("iframe-part1"));
    normalIframe(document.getElementById("iframe-part2"));
  }

  if(document.getElementById("journal").classList.contains("active")){
    normalIframe(document.getElementById("iframe-part3"));
  }
}

/* ---------- INITIAL LOAD ---------- */
window.addEventListener("load", () => {
  const savedTab = localStorage.getItem("activeTab") || "trackers";
  openTab(savedTab);
});
</script>

</body>
</html>    <!-- PART 3 : Journal -->
    <div class="iframe-wrap">
      <iframe src="part3.html" onload="normalIframe(this)"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB LOGIC ---------- */
function openTab(tabId){
  document.querySelectorAll('.tab-content').forEach(t=>{
    t.classList.remove('active');
  });
  document.querySelectorAll('.tab-btn').forEach(b=>{
    b.classList.remove('active');
  });

  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

/* ---------- IFRAME HELPERS ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){
    console.log("iframe fit blocked");
  }
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){
    console.log("iframe resize blocked");
  }
}
</script>

</body>
</html>
