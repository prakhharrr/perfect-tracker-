<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1200, initial-scale=1">
<title>Personal Tracker</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  color:#eaeaea;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}

/* fixed width */
.page-width{
  width:1200px;
  margin:0 auto;
}

/* tabs */
.tabs{
  display:flex;
  gap:12px;
  margin:24px auto 32px;
  width:1200px;
}

.tab-btn{
  padding:10px 18px;
  border-radius:12px;
  background:#111;
  color:#aaa;
  border:1px solid #222;
  cursor:pointer;
}

.tab-btn.active{
  background:#1a1a1a;
  color:#7df;
  border-color:#7df;
}

/* panels */
.tab-panel{
  display:none;
}
.tab-panel.active{
  display:block;
}

/* iframe */
.iframe-wrap{margin-bottom:48px;}
iframe{
  width:100%;
  border:none;
  display:block;
}
</style>
</head>

<body>

<!-- TABS -->
<div class="tabs">
  <button id="tabTrackers" class="tab-btn">ðŸ“Š Trackers</button>
  <button id="tabJournal"  class="tab-btn">ðŸ““ Journal</button>
</div>

<!-- TRACKERS -->
<div id="panelTrackers" class="tab-panel">
  <div class="page-width">

    <!-- PART 1 -->
    <div class="iframe-wrap">
      <iframe id="iframe1" src="part1.html"></iframe>
    </div>

    <!-- PART 2 -->
    <div class="iframe-wrap">
      <iframe id="iframe2" src="part2.html"></iframe>
    </div>

    <!-- PART 4 (NEW, after part 2) -->
    <div class="iframe-wrap">
      <iframe id="iframe4" src="part4.html"></iframe>
    </div>

  </div>
</div>

<!-- JOURNAL -->
<div id="panelJournal" class="tab-panel">
  <div class="page-width">
    <div class="iframe-wrap">
      <iframe id="iframe3" src="part3.html"></iframe>
    </div>
  </div>
</div>

<script>
/* ---------------- TAB SYSTEM (UNCHANGED) ---------------- */

const panels = {
  trackers: document.getElementById('panelTrackers'),
  journal:  document.getElementById('panelJournal')
};

const buttons = {
  trackers: document.getElementById('tabTrackers'),
  journal:  document.getElementById('tabJournal')
};

function switchTab(name){
  panels.trackers.classList.remove('active');
  panels.journal.classList.remove('active');
  buttons.trackers.classList.remove('active');
  buttons.journal.classList.remove('active');

  panels[name].classList.add('active');
  buttons[name].classList.add('active');

  localStorage.setItem('activeTab', name);
}

buttons.trackers.addEventListener('click', ()=>switchTab('trackers'));
buttons.journal.addEventListener('click', ()=>switchTab('journal'));

/* restore tab */
const saved = localStorage.getItem('activeTab');
switchTab(saved === 'journal' ? 'journal' : 'trackers');


/* ---------------- IFRAME INIT (SAME LOGIC) ---------------- */

function initIframe(iframe, mode){
  if(iframe.dataset.init) return;
  iframe.dataset.init = "1";

  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    if(mode === 'fit'){   // part 1 only
      const scale = 1200 / body.scrollWidth;
      if(scale < 1){
        body.style.transform = `scale(${scale})`;
        body.style.transformOrigin = "top left";
        body.style.width = body.scrollWidth + "px";
      }
      body.style.overflow = "hidden";
      iframe.style.height = body.scrollHeight * scale + "px";
    }else{
      iframe.style.height =
        doc.documentElement.scrollHeight + "px";
    }
  }catch(e){}
}

document.getElementById('iframe1')
  .addEventListener('load', e=>initIframe(e.target,'fit'));

document.getElementById('iframe2')
  .addEventListener('load', e=>initIframe(e.target,'normal'));

document.getElementById('iframe4')
  .addEventListener('load', e=>initIframe(e.target,'normal'));

document.getElementById('iframe3')
  .addEventListener('load', e=>initIframe(e.target,'normal'));
</script>

</body>
</html>  journal:  document.getElementById('tabJournal')
};

function switchTab(name){
  panels.trackers.classList.remove('active');
  panels.journal.classList.remove('active');
  buttons.trackers.classList.remove('active');
  buttons.journal.classList.remove('active');

  panels[name].classList.add('active');
  buttons[name].classList.add('active');

  localStorage.setItem('activeTab', name);
}

buttons.trackers.addEventListener('click', ()=>switchTab('trackers'));
buttons.journal.addEventListener('click', ()=>switchTab('journal'));

/* restore tab ONCE */
const saved = localStorage.getItem('activeTab');
switchTab(saved === 'journal' ? 'journal' : 'trackers');


/* ---------------- IFRAME INIT (RUN ONCE EVER) ---------------- */

function initIframe(iframe, mode){
  if(iframe.dataset.init) return;
  iframe.dataset.init = "1";

  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    if(mode === 'fit'){   // part 1
      const scale = 1200 / body.scrollWidth;
      if(scale < 1){
        body.style.transform = `scale(${scale})`;
        body.style.transformOrigin = "top left";
        body.style.width = body.scrollWidth+"px";
      }
      body.style.overflow = "hidden";
      iframe.style.height = body.scrollHeight * scale + "px";
    }else{
      iframe.style.height =
        doc.documentElement.scrollHeight + "px";
    }
  }catch(e){}
}

document.getElementById('iframe1')
  .addEventListener('load', e=>initIframe(e.target,'fit'));
document.getElementById('iframe2')
  .addEventListener('load', e=>initIframe(e.target,'normal'));
document.getElementById('iframe3')
  .addEventListener('load', e=>initIframe(e.target,'normal'));
</script>

</body>
</html>};

function activateTab(name){
  Object.keys(tabs).forEach(k=>{
    tabs[k].classList.remove('active');
    buttons[k].classList.remove('active');
  });

  tabs[name].classList.add('active');
  buttons[name].classList.add('active');
  localStorage.setItem('activeTab', name);
}

buttons.trackers.onclick = ()=>activateTab('trackers');
buttons.journal.onclick  = ()=>activateTab('journal');

/* restore tab on reload */
activateTab(localStorage.getItem('activeTab') || 'trackers');


/* ---------------- IFRAME RESIZE (RUN ONCE ONLY) ---------------- */

function resizeOnce(iframe, mode){
  if(iframe.dataset.done) return;
  iframe.dataset.done = "1";

  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    if(mode === 'fit'){   // part 1
      const contentWidth = body.scrollWidth;
      const scale = 1200 / contentWidth;
      if(scale < 1){
        body.style.transform = `scale(${scale})`;
        body.style.transformOrigin = "top left";
        body.style.width = contentWidth+"px";
      }
      body.style.overflow = "hidden";
      iframe.style.height = body.scrollHeight * scale + "px";
    }else{
      iframe.style.height =
        doc.documentElement.scrollHeight + "px";
    }
  }catch(e){}
}

/* attach load listeners ONCE */
document.getElementById('iframe-part1')
  .addEventListener('load', e=>resizeOnce(e.target,'fit'));

document.getElementById('iframe-part2')
  .addEventListener('load', e=>resizeOnce(e.target,'normal'));

document.getElementById('iframe-part3')
  .addEventListener('load', e=>resizeOnce(e.target,'normal'));
</script>

</body>
</html>
<script>
/* ---------- TAB CORE (BULLETPROOF) ---------- */

const trackersTab = document.getElementById('trackers');
const journalTab  = document.getElementById('journal');
const btnTrackers = document.getElementById('btn-trackers');
const btnJournal  = document.getElementById('btn-journal');

function showTab(tab){
  // content
  trackersTab.classList.remove('active');
  journalTab.classList.remove('active');

  // buttons
  btnTrackers.classList.remove('active');
  btnJournal.classList.remove('active');

  if(tab === 'journal'){
    journalTab.classList.add('active');
    btnJournal.classList.add('active');
  }else{
    trackersTab.classList.add('active');
    btnTrackers.classList.add('active');
  }

  localStorage.setItem('activeTab', tab);
}

btnTrackers.onclick = () => showTab('trackers');
btnJournal.onclick  = () => showTab('journal');

/* restore tab on reload */
const savedTab = localStorage.getItem('activeTab') || 'trackers';
showTab(savedTab);

/* ---------- IFRAME HELPERS (UNCHANGED) ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){}
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){}
}
</script>

</body>
</html>  <div class="page-width">

    <!-- PART 3 -->
    <div class="iframe-wrap">
      <iframe src="part3.html" onload="normalIframe(this)"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB LOGIC (FIXED) ---------- */
function openTab(tabId, btn){
  document.querySelectorAll('.tab-content')
    .forEach(t => t.classList.remove('active'));

  document.querySelectorAll('.tab-btn')
    .forEach(b => b.classList.remove('active'));

  document.getElementById(tabId).classList.add('active');
  btn.classList.add('active');

  // save state
  localStorage.setItem('activeTab', tabId);
}

/* restore last tab on reload */
window.addEventListener('DOMContentLoaded', () => {
  const savedTab = localStorage.getItem('activeTab') || 'trackers';

  if(savedTab === 'journal'){
    openTab('journal', document.getElementById('btn-journal'));
  }else{
    openTab('trackers', document.getElementById('btn-trackers'));
  }
});

/* ---------- IFRAME HELPERS (UNCHANGED) ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){
    console.log("iframe fit blocked");
  }
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){
    console.log("iframe resize blocked");
  }
}
</script>

</body>
</html>    <!-- PART 3 (ONLY HERE) -->
    <div class="iframe-wrap">
      <iframe src="part3.html" onload="normalIframe(this)"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB LOGIC (WITH PERSISTENCE) ---------- */
const tabs = document.querySelectorAll(".tab-btn");
const contents = document.querySelectorAll(".tab-content");

function openTab(tabId){
  contents.forEach(c => c.classList.remove("active"));
  tabs.forEach(b => b.classList.remove("active"));

  document.getElementById(tabId).classList.add("active");
  document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");

  localStorage.setItem("activeTab", tabId);
}

tabs.forEach(btn=>{
  btn.addEventListener("click", () => {
    openTab(btn.dataset.tab);
  });
});

/* ---------- IFRAME HELPERS (UNCHANGED) ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){}
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){}
}

/* ---------- INITIAL LOAD ---------- */
window.addEventListener("load", () => {
  const savedTab = localStorage.getItem("activeTab") || "trackers";
  openTab(savedTab);
});
</script>

</body>
</html>    <!-- PART 3 -->
    <div class="iframe-wrap">
      <iframe id="iframe-part3" src="part3.html"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB SYSTEM (STATEFUL) ---------- */
const tabs = document.querySelectorAll(".tab-btn");
const contents = document.querySelectorAll(".tab-content");

function openTab(tabId){
  contents.forEach(c => c.classList.remove("active"));
  tabs.forEach(b => b.classList.remove("active"));

  document.getElementById(tabId).classList.add("active");
  document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");

  localStorage.setItem("activeTab", tabId);

  // resize visible iframes AFTER tab opens
  setTimeout(resizeVisibleIframes, 50);
}

tabs.forEach(btn=>{
  btn.addEventListener("click", () => {
    openTab(btn.dataset.tab);
  });
});

/* ---------- IFRAME HELPERS ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){}
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){}
}

function resizeVisibleIframes(){
  if(document.getElementById("trackers").classList.contains("active")){
    fitIframe(document.getElementById("iframe-part1"));
    normalIframe(document.getElementById("iframe-part2"));
  }

  if(document.getElementById("journal").classList.contains("active")){
    normalIframe(document.getElementById("iframe-part3"));
  }
}

/* ---------- INITIAL LOAD ---------- */
window.addEventListener("load", () => {
  const savedTab = localStorage.getItem("activeTab") || "trackers";
  openTab(savedTab);
});
</script>

</body>
</html>    <!-- PART 3 : Journal -->
    <div class="iframe-wrap">
      <iframe src="part3.html" onload="normalIframe(this)"></iframe>
    </div>

  </div>
</div>

<script>
/* ---------- TAB LOGIC ---------- */
function openTab(tabId){
  document.querySelectorAll('.tab-content').forEach(t=>{
    t.classList.remove('active');
  });
  document.querySelectorAll('.tab-btn').forEach(b=>{
    b.classList.remove('active');
  });

  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
}

/* ---------- IFRAME HELPERS ---------- */
function fitIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    const body = doc.body;

    const contentWidth = body.scrollWidth;
    const frameWidth = 1200;
    const scale = frameWidth / contentWidth;

    if(scale < 1){
      body.style.transform = `scale(${scale})`;
      body.style.transformOrigin = "top left";
      body.style.width = contentWidth + "px";
    }

    body.style.margin = "0";
    body.style.overflow = "hidden";

    iframe.style.height =
      body.scrollHeight * scale + "px";

  }catch(e){
    console.log("iframe fit blocked");
  }
}

function normalIframe(iframe){
  try{
    const doc = iframe.contentWindow.document;
    iframe.style.height =
      doc.documentElement.scrollHeight + "px";
  }catch(e){
    console.log("iframe resize blocked");
  }
}
</script>

</body>
</html>
