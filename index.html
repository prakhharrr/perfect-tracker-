<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1200, initial-scale=1">
<title>Personal Tracker</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  color:#eaeaea;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}

/* fixed width */
.page-width{
  width:1200px;
  margin:0 auto;
}

/* tabs */
.tabs{
  display:flex;
  gap:12px;
  margin:24px auto 32px;
  width:1200px;
}

.tab-btn{
  padding:10px 18px;
  border-radius:12px;
  background:#111;
  color:#aaa;
  border:1px solid #222;
  cursor:pointer;
}

.tab-btn.active{
  background:#1a1a1a;
  color:#7df;
  border-color:#7df;
}

/* panels */
.tab-panel{ display:none; }
.tab-panel.active{ display:block; }

/* iframe */
.iframe-wrap{ margin-bottom:48px; }
iframe{
  width:100%;
  border:none;
  display:block;
}
</style>
</head>

<body>

<!-- TABS -->
<div class="tabs">
  <button id="tabTrackers" class="tab-btn">ðŸ“Š Trackers</button>
  <button id="tabJournal"  class="tab-btn">ðŸ““ Journal</button>
</div>

<!-- TRACKERS -->
<div id="panelTrackers" class="tab-panel">
  <div class="page-width">
    <div class="iframe-wrap">
      <iframe id="iframe1" data-src="part1.html"></iframe>
    </div>
    <div class="iframe-wrap">
      <iframe id="iframe2" data-src="part2.html"></iframe>
    </div>
  </div>
</div>

<!-- JOURNAL -->
<div id="panelJournal" class="tab-panel">
  <div class="page-width">
    <div class="iframe-wrap">
      <iframe id="iframe3" data-src="part3.html"></iframe>
    </div>
  </div>
</div>

<script>
/* ---------------- TAB SYSTEM ---------------- */

const panels = {
  trackers: document.getElementById('panelTrackers'),
  journal:  document.getElementById('panelJournal')
};

const buttons = {
  trackers: document.getElementById('tabTrackers'),
  journal:  document.getElementById('tabJournal')
};

function loadIframe(iframe, mode){
  if(iframe.dataset.loaded) return;

  iframe.dataset.loaded = "1";
  iframe.src = iframe.dataset.src;

  iframe.addEventListener('load', ()=>{
    try{
      const doc = iframe.contentWindow.document;
      const body = doc.body;

      if(mode === 'fit'){
        const scale = 1200 / body.scrollWidth;
        if(scale < 1){
          body.style.transform = `scale(${scale})`;
          body.style.transformOrigin = "top left";
          body.style.width = body.scrollWidth+"px";
        }
        body.style.overflow = "hidden";
        iframe.style.height = body.scrollHeight * scale + "px";
      }else{
        iframe.style.height =
          doc.documentElement.scrollHeight + "px";
      }
    }catch(e){}
  });
}

function switchTab(name){
  panels.trackers.classList.remove('active');
  panels.journal.classList.remove('active');
  buttons.trackers.classList.remove('active');
  buttons.journal.classList.remove('active');

  panels[name].classList.add('active');
  buttons[name].classList.add('active');
  localStorage.setItem('activeTab', name);

  // load required iframes
  if(name === 'trackers'){
    loadIframe(document.getElementById('iframe1'), 'fit');
    loadIframe(document.getElementById('iframe2'), 'normal');
  }else{
    loadIframe(document.getElementById('iframe3'), 'normal');
  }
}

buttons.trackers.onclick = ()=>switchTab('trackers');
buttons.journal.onclick  = ()=>switchTab('journal');

/* restore tab */
switchTab(localStorage.getItem('activeTab') || 'trackers');
</script>

</body>
</html>
